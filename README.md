# Инструкция по работе с прототипами сайтов в Cetera Labs

## Источник

**gitlab.cetera.ru:boilerplate_wireframe**

Актуальная версия исходников лежит в ветке *master*, код в которой мы используем для создания прототипов и дизайнов под конкретный проект. В ветке *beta* и любых подобных ведется доработка прототипа. Не стоит ничего добавлять в ветку *master* без ведома Дениса Сахарова <d.sakharov@ceteralabs.com>.

## Используемые технологии

* система управления версиями - [Git](https://git-scm.com)
* менеджер пакетов и внешних зависимостей - [npm](https://www.npmjs.com)
* автоматические сборки - [Gulp](http://gulpjs.com)
* препроцессор CSS - [Sass](http://sass-lang.com)
* шаблонизатор HTML - [Pug(ex-Jade)](https://pugjs.org/) - _для работы с Pug в PhpStorm и WebStorm необходимо обновить программы до последних версий, удалить плагин Jade, если он был установлен, и установить плагин Pug._
* CSS-фреймворк - [Foundation](http://foundation.zurb.com)
* динамика - [JQuery](http://jquery.com) и его плагины
* набор иконок - [Font Awesome](http://fortawesome.github.io/Font-Awesome)

## Структура проекта

```
boilerplate_wireframe/
├── .git/
│   └── ...
├── dist/
│   └── ...
├── node_modules/
│   └── ...
├── src/
│   └── ...
├── .gitignore
├── .gitlab-ci.yml
├── gulpfile.js
├── package.json
└── README.md
```

В папке *src* лежат все исходники проекта. Вся разработка ведется в этой папке. Она попадает в git.

Папки *dist* и *node_modules* являются результатами работы npm и сборщика. Они не попадают в git. Содержимое этих папок никак не изменяется. Файлы и папки из *dist* являются результатом, демонстрируемым клиенту и используемым в дальнейшей разработке сайтов.

Файл *package.json* содержит описание проекта в формате npm и все внешние зависимости, необходимые для работы.

В файле *gulpfile.js* содержатся правила для сборки проекта из исходников *src* в результат *dist*.

В файле *.gitlab-ci.yml* содержатся правила автоматической сборки и деплоя проекта.

## Установка и сборка проекта

Для работы с этим проектом необходимо предварительно установить [Git](https://git-scm.com) и [Node.js](https://nodejs.org)**[(устанавливаем LTS-версию)**.

Инструкция по установке для [WSL](https://ru.wikipedia.org/wiki/Windows_Subsystem_for_Linux) находится [тут](WSL.md).

#### Извлеките содержимое репозитория
```sh
$ git clone git@gitlab.cetera.ru:boilerplate_wireframe
```
#### Перейдите во вновь созданную папку
```sh
$ cd boilerplate_wireframe/
```
#### Установите внешние зависимости
```sh
$ npm install
```
#### Запустите сборщик
```sh
$ npm start
```

В результате создастся папка *dist*, в которой окажутся готовые для дальнейшего использования html-файлы.

## Работа над клиентским прототипом или дизайном

После извлечения этого проекта из git **обязательно удалите** папку *.git/* в корне проекта. Вся дальнейшая работа должна производиться в репозитории того проекта, над которым вы работаете.

Настройте правила автоматической сборки своего проекта для демонстрации клиенту в файле *.gitlab-ci.yml*.

## Общие принципы работы

```
├── src/
│   ├── fonts/
│   ├── i/
│   ├── images/
│   ├── js/
│   ├── pug/
│   └── scss/
```

Все новые файлы должны появляться исключительно в папке *src/*. Отсюда их забирает сборщик и по правилам описанным в *gulpfile.js* формируется содержимое папки *dist/*.

Все шрифты попадают в папку *src/fonts/* с любой структурой внутри.

Все контентные картинки попадают в папку *src/i/* с любой структурой внутри. Картинки в этой папке не будут оптимизироваться сборщиком. Сюда следует сладывать все временные картинки, которых потом не будет на сайте.

Все картинки дизайна попадают в папку *src/images/* с любой структурой внутри. Картинки в этой папке будут оптимизироваться сборщиком. Сюда следует складывать все постоянные картинки(логотипы, иконки, фоны и тд).

Все исходники html хранятся и редактируется в папке *src/pug/*. В корне этой папки лежат прототипы будущих html файлов. Все вложения должны попадать в папку *src/pug/components/*. При работе над конкретным клиентским проектом ненужные pug-файлы из корня *src/pug/* необходимо удалить.

Весь js попадает в папку *src/js/*. Все внешние js-библиотеки необходимо устанавливать через npm и файл package.json https://docs.npmjs.com/files/package.json.

Все исходники css хранятся и редактируются в папке *src/scss/*.

Для сборки отдельной страницы нужно установить gulp-cli глобально
npm i -g gulp-cli
а затем можно использовать команду (например для страницы corp-index)
gulp custom --pg shop-product

Для автоматического обновления страницы нужно открыть ее в браузере по адресу http://localhost:3000/shop-product.html (пример для страницы shop-product.html).

* * *

Вопросы и предложения: <d.sakharov@ceteralabs.com> и <v.ukhov@ceteralabs.com>

Автор: Денис Сахаров <d.sakharov@ceteralabs.com>

&copy; Cetera Labs http://cetera.ru/
